# 1.schedule()

选择系统中下一个要运行的进程

（1）循环检测就绪队列中的每个任务

          若任务的超时定时器超时 && 状态为可中断睡眠，则超时计时器清0，状态置为就绪

          若任务的定时器过期，则定时器清0，SIGALARM信号置位（定时器！=超时定时器）

          若任务除了阻塞信号外还有其它信号 && 状态为可中断睡眠，则状态置为就绪

（2）选择counter值（剩余执行时间）最大的任务

          若counter>0，则执行该任务

         若counter=0，则重新计算每个任务的counter值，并重新执行step 2


# 2.sleep_on()

睡眠函数，使当前进行进入睡眠状态

（1）临时指针指向等待队列

（2）等待队列头指针指向当前任务

（3）当前任务的状态置为等待

（4）shedule()

（5）执行到这里说明当前任务已经被唤醒，但是不一定能继续执行

（6）判断等待队列的头指针p

         若p指向当前进程，则置当前进程为就绪态

         若p指向的不是当前进程，则置当前进程为不可中断的等待，p所指向的进程为就绪


# 3.这里所构成的等待队列与数据结构中的链表不同，

![](/assets/3.gif)

# 4.唤醒进程是指进程处于可以被调度的就绪态