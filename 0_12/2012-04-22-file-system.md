文件系统的组成：

1.高速缓冲区的管理程序

2.文件系统的低层通用函数

3.对文件中数据进行读写操作

4.系统调用接口的实现


MINIX文件系统的结构：

![](/assets/4.gif)

1.引导块：存放的是计算机加电启动时同BIOS自动读入的执行代码和数据

2.超级块：存放文件系统的结构信息

3.i结点位图：i结点是否被使用

4.逻辑结构位图：数据区第i个块是否被使用。最多8个，可表示64MB

5.i结点：存放文件或目录的索引结点

6.数据区：i_zone[0] - i_zone[6]：直接块，7KB

   i_zone[7]：一次间接块，512KB

   i_zone[8]：二次间接块，512*512KB

   设备文件不战胜数据盘块，只占用i结点


对于文件目录，可执行表示可以进入目录


一个逻辑磁盘块可以存放1024/16=64个目录项


文件访问过程：

![](/assets/5.gif)

硬链接：用指针指向目标的i结点，不能跨越文件系统

软链接：在数据块中存放目标文件的路径名字符串，可以跨越文件系统


“ . ”目录项：给出当前目录的i结点号

“ .. ”目录项：给当前目录父目录的i结点号

每个目录文件的链接数至少是2


每个进程最多可同时打开20个文件

整个系统最多可同时打开64个文件

某一时刻内核中只能同时保存32个i节点信息

三者关系如下：

![](/assets/6.gif)